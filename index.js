const express = require('express')
const path = require('path');
const { youtube, stackoverflow, github, googleSearch } = require('./utility');
const app = express();
const port = process.env.PORT || 3000
const results = require('./data')

require('dotenv').config({ path: './TEST.env' })

app.use(express.json())
app.use(express.urlencoded({ extended: true }))
app.use(express.static(path.join(__dirname, 'public')))

app.set('view engine', 'ejs')
app.set('views', path.join(__dirname, 'views'))

app.get("/", (req, res) => {
    res.render('index')
})

app.get("/search", async(req, res) => {
    // const searchQuery = req.query.search_query

    // let promises = []
    // const windows = [youtube, stackoverflow, github, googleSearch]
    // windows.forEach(window => {
    //     promises.push(window(searchQuery))
    // })

    // await Promise.all(promises);

    results.youtube = [{ "id": "bFVsdpFcQIU", "title": "1 Million Special Video | PowerofStocks", "time": "1 year ago", "imgUrl": "https://i.ytimg.com/vi/bFVsdpFcQIU/mqdefault.jpg" }, { "id": "w-eqe_VuQes", "title": "Learn The Real Power Of Stock Market | Subasish Pani @POWER OF STOCKS | Josh Talks", "time": "2 years ago", "imgUrl": "https://i.ytimg.com/vi/w-eqe_VuQes/mqdefault.jpg" }, { "id": "Y3EH1122tLc", "title": "Power of Stocks Profits Strategies | #OptionTrading Marathon | Learn Stock Market Trading", "time": "1 year ago", "imgUrl": "https://i.ytimg.com/vi/Y3EH1122tLc/mqdefault.jpg" }, { "id": "-E5k6miIQLw", "title": "ପରିବାର ସହ ମିଶି କେମିତି ଜନ୍ମଦିନ ପାଳିଲେ ଶୁଭାଶିଷ Subhashis birthday latest video", "time": "1 year ago", "imgUrl": "https://i.ytimg.com/vi/-E5k6miIQLw/mqdefault.jpg" }, { "id": "_RJ85jYW7sk", "title": "Subhashis Natua : কোভিশিল্ড গবেষণায় বঙ্গ সন্তানকে পুরস্কার ভারত সরকারের", "time": "2 years ago", "imgUrl": "https://i.ytimg.com/vi/_RJ85jYW7sk/mqdefault.jpg" }, { "id": "dtGNa2SYwus", "title": "Adha Adhare | Full Video | Subhashis  | Archita | Kuldeep | Lipsa | Pintu Nanda | Tarang Music", "time": "1 year ago", "imgUrl": "https://i.ytimg.com/vi/dtGNa2SYwus/mqdefault.jpg" }, { "id": "_ZKlBK6xcBU", "title": "Need For Risk Managers: Subhashis Nath", "time": "7 years ago", "imgUrl": "https://i.ytimg.com/vi/_ZKlBK6xcBU/mqdefault.jpg" }, { "id": "aglRKY0zBgk", "title": "Keharwa Taal//New Variation//Beginners Student//Subhashis Banerjee Tabla ⚘⚘⚘", "time": "1 year ago", "imgUrl": "https://i.ytimg.com/vi/aglRKY0zBgk/mqdefault.jpg" }, { "id": "nYHyFtokuns", "title": "SUBHASHIS MOVIES/ INTERVIEW -JUMA &amp; MISTI {ACTRESS}", "time": "1 year ago", "imgUrl": "https://i.ytimg.com/vi/nYHyFtokuns/mqdefault.jpg" }, { "id": "mNwshYnwCg0", "title": "Raja Jema | Full Video | Ame Ta Middle Class | Subhashis Sharma | Tanushree Dash | Tarang Music", "time": "1 year ago", "imgUrl": "https://i.ytimg.com/vi/mNwshYnwCg0/mqdefault.jpg" }]
    results.github = [{ "title": "IITD-COMPUTER-VISION-GROUP/Egomotion_with_Local_Loop_Closures", "url": "https://github.com/IITD-COMPUTER-VISION-GROUP/Egomotion_with_Local_Loop_Closures", "description": "This code is based on the paper [Computing Egomotion with Local Loop Closures for Egocentric Videos](https://arxiv.org/pdf/1701.04743.pdf) by Suvam Patra, Himanshu Aggarwal, Himani Arora, Subhashis Banerjee, Chetan Arora. It implements a robust method for camera pose estimation using short local loop closures and rotation averaging." }, { "title": "subhashishanand/subhashishanand", "url": "https://github.com/subhashishanand/subhashishanand", "description": null }, { "title": "subhashish21/subhashish21", "url": "https://github.com/subhashish21/subhashish21", "description": "Config files for my GitHub profile." }, { "title": "subhashish2003/subhashish2003", "url": "https://github.com/subhashish2003/subhashish2003", "description": "Config files for my GitHub profile." }, { "title": "subhashish83/subhashish83", "url": "https://github.com/subhashish83/subhashish83", "description": null }, { "title": "subhashish200/subhashish200", "url": "https://github.com/subhashish200/subhashish200", "description": "Config files for my GitHub profile." }, { "title": "subhashb1/Subhashis", "url": "https://github.com/subhashb1/Subhashis", "description": "For all my personal development work" }, { "title": "subhashis2020/subhashis2020", "url": "https://github.com/subhashis2020/subhashis2020", "description": "Config files for my GitHub profile." }, { "title": "SubhashisRay/SubhashisRay", "url": "https://github.com/SubhashisRay/SubhashisRay", "description": "Config files for my GitHub profile." }, { "title": "Subhashish008/Subhashish008", "url": "https://github.com/Subhashish008/Subhashish008", "description": "Config files for my GitHub profile." }, { "title": "subhashis97/subhashis97", "url": "https://github.com/subhashis97/subhashis97", "description": "Config files for my GitHub profile." }, { "title": "SubhashishMahapatra/SubhashishMahapatra", "url": "https://github.com/SubhashishMahapatra/SubhashishMahapatra", "description": "Config files for my GitHub profile." }, { "title": "Subhashis360/Subhashis360", "url": "https://github.com/Subhashis360/Subhashis360", "description": "Config files for my GitHub profile." }, { "title": "SubhashisD16/SubhashisD16", "url": "https://github.com/SubhashisD16/SubhashisD16", "description": "Config files for my GitHub profile." }, { "title": "subhgorai/subhashis", "url": "https://github.com/subhgorai/subhashis", "description": null }, { "title": "dashingdash/Subhashis", "url": "https://github.com/dashingdash/Subhashis", "description": "practice" }, { "title": "SubhashisKantha/subhashis", "url": "https://github.com/SubhashisKantha/subhashis", "description": null }, { "title": "Subhashis02012004/Subhashis02012004", "url": "https://github.com/Subhashis02012004/Subhashis02012004", "description": "Config files for my GitHub profile." }, { "title": "subhashish06/subhashish06", "url": "https://github.com/subhashish06/subhashish06", "description": null }, { "title": "subhashis27061992/subhashis", "url": "https://github.com/subhashis27061992/subhashis", "description": null }, { "title": "subhashis174/subhashis174.github.io", "url": "https://github.com/subhashis174/subhashis174.github.io", "description": null }, { "title": "Subhashis2711/Subhashis2711", "url": "https://github.com/Subhashis2711/Subhashis2711", "description": "Config files for my GitHub profile." }, { "title": "Subhashish1973/Subhashish1973", "url": "https://github.com/Subhashish1973/Subhashish1973", "description": null }, { "title": "Subhashishpo/Subhashishpo", "url": "https://github.com/Subhashishpo/Subhashishpo", "description": "Config files for my GitHub profile." }, { "title": "subhashishonline/subhashishonline", "url": "https://github.com/subhashishonline/subhashishonline", "description": null }, { "title": "subhashishraj/subhashishraj", "url": "https://github.com/subhashishraj/subhashishraj", "description": "Config files for my GitHub profile." }, { "title": "subhashishhh/subhashishhh", "url": "https://github.com/subhashishhh/subhashishhh", "description": "Config files for my GitHub profile." }, { "title": "subhashiscse/subhashiscse", "url": "https://github.com/subhashiscse/subhashiscse", "description": null }, { "title": "Subhashishnayak/Subhashish", "url": "https://github.com/Subhashishnayak/Subhashish", "description": null }, { "title": "subhashissuara/subhashissuara", "url": "https://github.com/subhashissuara/subhashissuara", "description": null }]
    results.stackoverflow = []
    results.googleSearch = [{ "title": "Subhashis Sen - Oracle Cloud Business Strategy APAC", "url": "https://in.linkedin.com/in/subhashis", "description": "Subhashis Sen. Director- Oracle Cloud Business Strategy APAC | Cloud Solution Strategy for Industries. Oracle. Bengaluru, Karnataka, India." }, { "title": "Subhashis Nath - GRM Institute", "url": "https://grm.institute/teacher/mentor/", "description": "Subhashis is a Senior Vice President and the Service Line Leader for Enterprise Risk & Compliance at Genpact. He was the founder partner of Axis Risk Consulting ..." }, { "title": "Subhashis Banerjee's home page - CSE, IIT Delhi", "url": "https://www.cse.iitd.ac.in/~suban/", "description": "Subhashis Banerjee. Professor. Computer Science and Engineering · Indian Institute of Technology Delhi. Hauz Khas, New Delhi 110 016, India." }, { "title": "Subhashis Ghoshal - Department of Statistics - NC State", "url": "https://statistics.sciences.ncsu.edu/people/sghosal/", "description": "Subhashis Ghoshal · Education · Area(s) of Expertise · Campus Map · Connect With Us." }, { "title": "Subhashis Banerjee - Ashoka University", "url": "https://www.ashoka.edu.in/profile/subhashis-banerjee/", "description": "Subhashis is on leave from the Department of Computer Science and Engineering at IIT Delhi, where he has held the Ministry of Urban Development, ..." }, { "title": "Subhashis Guha - Performics India", "url": "https://www.performics.com/in/about-us-performics-india/leadership/our-leaders/subhashis-guha/", "description": "Subhashis comes with 18+yrs of experience, specializing in marketing strategy, digital marketing, client consulting, and program management." }, { "title": "Subhashis Banerjee - dblp", "url": "https://dblp.org/pid/92/2241", "description": "List of computer science publications by Subhashis Banerjee. ... Subhashis Banerjee , Sushmita Mitra : Novel Volumetric Sub-region Segmentation in Brain ..." }, { "title": "‪Subhashis Natua‬ - ‪Google Scholar‬", "url": "https://scholar.google.com/citations?user=xx7voMAAAAAJ&hl=en", "description": "Subhashis Natua. University of Illinois, Urbana-Champaign. Verified email at illinois.edu. RNA BiologyRNA ProcessingCancer BiologyTumor Hypoxia." }]

    // res.send(results);

    res.render('results', { results })
})

app.listen(port, () => {
    console.log(`Listening on port ${port}`)
})